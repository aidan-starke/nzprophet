(this.webpackJsonpprophet=this.webpackJsonpprophet||[]).push([[0],{39:function(e,t){e.exports={roundTo:function(e,t){void 0===t&&(t=0);var n=Math.pow(10,t);return e=parseFloat((e*n).toFixed(11)),Math.round(e)/n}}},57:function(e,t,n){},64:function(e,t,n){},87:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(13),s=(n(57),n(11)),o=n(21),i="CHANGE_PAGE",u="REFRESH",j="SET_USERS",d="SET_USER",l="SET_USER_DATA",b="SET_PROFIT_DATA";function O(e){return{type:i,page:e}}var h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Home",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i:return t.page;case u:return"Home";default:return e}};var p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{users:[],user:"",username:"",data:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:for(var n=0;n<t.users.length;n++)e.users[n]=t.users[n].name;return e;case d:return e.user=t.user,e;case l:return e.username=t.username,e.data=t.data,e;default:return e}};var f,x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{profitData:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return e.profitData=t.data,console.log(e),e;default:return e}},v=Object(o.b)({currentPage:h,users:p,crypto:x}),g=Object(o.c)(v,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),m=(n(63),n(64),n(94)),y=n(100),S=n(95),C=n(97),E=n(99),T=n(12),_=n(96),R=n(24),w=n.n(R),D=n(49);function k(e){return w.a.get("https://min-api.cryptocompare.com/data/price?fsym=".concat(e,"&tsyms=NZD"),{headers:{Authorization:"Apikey ".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).CRYPTOCOMPARE_API_KEY)}}).then((function(e){return e.data})).catch((function(e){return console.log(e.message)}))}n.n(D).a.config(),f="https://nzprophet.herokuapp.com";var N=n(3),L=Object(s.b)()((function(e){var t=e.dispatch,n=Object(r.useState)([]),c=Object(T.a)(n,2),a=c[0],s=c[1];function o(e){var n;e.preventDefault(),t({type:u}),(n=e.target.id,w.a.get("".concat(f,"/api/v1/crypto"),{params:{name:n}}).then((function(e){return e.data})).catch((function(e){return console.log(e.message)}))).then((function(n){var r;t(function(e){var t=e.username,n=e.data;return{type:l,username:t[0].username,data:n}}(n)),t((r=e.target.id,{type:d,user:r})),t(O(e.target.id))}))}return Object(r.useEffect)((function(){w.a.get("".concat(f,"/api/v1/users")).then((function(e){return e.data})).catch((function(e){return console.log(e.message)})).then((function(e){s(e)}))}),[]),Object(N.jsx)(_.a,{title:"Users",id:"basic-nav-dropdown",children:a.map((function(e,t){return Object(N.jsx)(_.a.Item,{id:e.name,onClick:function(e){return o(e)},children:e.name},t)}))})}));var A=Object(s.b)((function(e){return{users:e.users}}))((function(e){var t=e.dispatch;return Object(N.jsxs)(C.a,{bg:"light",expand:"lg",children:[Object(N.jsx)(C.a.Brand,{id:"Home",onClick:function(e){return t(O(e.target.id))},children:"NZ Prophet"}),Object(N.jsx)(C.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(N.jsx)(C.a.Collapse,{id:"basic-navbar-nav",children:Object(N.jsx)(E.a,{className:"mr-auto",children:Object(N.jsx)(L,{})})})]})})),P=function(){return Object(N.jsxs)(y.a.Footer,{children:[Object(N.jsxs)(y.a.Text,{align:"center",children:["Developed by Aidan Starke - ",Object(N.jsx)(y.a.Link,{href:"https://github.com/aidan-starke/prophet",children:"https://github.com/aidan-starke"})]}),Object(N.jsxs)(y.a.Text,{align:"center",className:"text-muted",children:["Images from ",Object(N.jsx)(y.a.Link,{href:"https://cryptologos.cc/",children:"https://cryptologos.cc/"})]})]})},I=n(93),H=n(39);var F=function(e){var t=e.crypto,n=Object(r.useState)({}),c=Object(T.a)(n,2),a=c[0],s=c[1],o=Object(r.useState)(!1),i=Object(T.a)(o,2),u=i[0],j=i[1],d=t.name,l=t.investment,b=t.coinsOwned,O=t.src;return Object(r.useEffect)((function(){j(!1),k(d).then((function(e){var t=e.NZD*b,n=Object(H.roundTo)(t,2),r=t-l,c=Object(H.roundTo)(r,2),a=r/l,o=Math.round(100*a);s({profit:c,percentage:o,value:n}),j(!0)}))}),[]),Object(N.jsxs)(y.a,{style:{flex:1,width:"15rem"},children:[Object(N.jsx)(y.a.Img,{variant:"top",src:O}),Object(N.jsxs)(y.a.Body,{children:[Object(N.jsx)(y.a.Title,{children:d}),!u&&Object(N.jsx)(y.a.Text,{children:"Loading..."}),u&&Object(N.jsxs)(y.a.Text,{children:["You bought ",b," ",d," for $",l,".",Object(N.jsx)("br",{}),"Your coins are now worth $",a.value,".",Object(N.jsx)("br",{}),"($",a.profit,", ",a.percentage,"% ROI)"]})]})]})},U=n(92),G=n(52),B=Object(s.b)()((function(e){var t=e.dispatch;function n(e){e.preventDefault(),t(O(e.target.id))}return Object(N.jsxs)(U.a,{children:[Object(N.jsx)(G.a,{variant:"secondary",type:"submit",id:"trade",onClick:function(e){return n(e)},children:"New Trade?"}),Object(N.jsx)(G.a,{variant:"secondary",type:"submit",id:"buy",onClick:function(e){return n(e)},children:"Bought more coins?"}),Object(N.jsx)(G.a,{variant:"secondary",type:"submit",id:"spend",onClick:function(e){return n(e)},children:"Spent some coins?"})]})}));var M=Object(s.b)((function(e){return{users:e.users}}))((function(e){var t=e.users;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(I.a,{style:{display:"flex",flexDirection:"row"},children:t.data.map((function(e,t){return Object(N.jsx)(F,{crypto:e},t)}))}),Object(N.jsx)("br",{}),Object(N.jsx)(B,{})]})})),V=n(98),K=function(e){var t=e.user,n=e.usersCrypto,c=Object(r.useState)(""),a=Object(T.a)(c,2),s=a[0],o=a[1],i=Object(r.useState)(""),u=Object(T.a)(i,2),j=u[0],d=u[1],l=Object(r.useState)(""),b=Object(T.a)(l,2),O=b[0],h=b[1],p=Object(r.useState)(""),x=Object(T.a)(p,2),v=x[0],g=x[1],m=Object(r.useState)(!1),S=Object(T.a)(m,2),C=S[0],E=S[1];function _(e){e.preventDefault();var n,r=k(s)*j,c=k(O)*v,a={user:t,cryptoSent:s,coinsSent:j,cryptoReceived:O,coinsReceived:v,coinsSentValue:r,coinsReceivedValue:c};C?(n=a,w.a.post("".concat(f,"/api/v1/crypto/trade/new"),n).catch((function(e){return console.log(e.message)}))):function(e){w.a.put("".concat(f,"/api/v1/crypto/trade"),e).catch((function(e){return console.log(e.message)}))}(a)}return Object(N.jsxs)(y.a,{className:"justify-content-center",width:"50rem",children:[Object(N.jsx)(y.a.Header,{align:"center",children:"New Trade?"}),Object(N.jsx)(y.a.Body,{children:Object(N.jsxs)(V.a,{children:[Object(N.jsxs)(V.a.Group,{children:[Object(N.jsx)(V.a.Label,{children:"Crypto Sent"}),Object(N.jsx)(V.a.Control,{as:"select",children:n.map((function(e){return Object(N.jsx)("option",{id:e.name,onClick:function(e){return o(e.target.id)},children:e.name})}))})]}),""!==s&&Object(N.jsxs)(V.a.Group,{children:[Object(N.jsx)(V.a.Label,{children:"Coins Sent"}),Object(N.jsx)(V.a.Control,{as:"input",value:j,onChange:function(e){return d(e.target.value)}})]}),Object(N.jsxs)(V.a.Group,{children:[Object(N.jsx)(V.a.Label,{children:"Crypto Received"}),Object(N.jsxs)(V.a.Control,{as:"select",children:[n.map((function(e){return Object(N.jsx)("option",{id:e.name,onClick:function(e){return h(e.target.id)},children:e.name})})),Object(N.jsx)("option",{onClick:function(){return E(!0)},children:"Other"})]})]}),C&&Object(N.jsxs)(V.a.Group,{children:[Object(N.jsx)(V.a.Label,{children:"Enter Crypto Received"}),Object(N.jsx)(V.a.Control,{as:"input",value:O,onChange:function(e){return h(e.target.value)}})]}),""!==O&&Object(N.jsxs)(V.a.Group,{children:[Object(N.jsx)(V.a.Label,{children:"Coins Received"}),Object(N.jsx)(V.a.Control,{as:"input",value:v,onChange:function(e){return g(e.target.value)}})]}),Object(N.jsx)(G.a,{variant:"primary",type:"submit",align:"center",onClick:function(e){return _(e)},children:"Submit"})]})})]})};var X=Object(s.b)((function(e){return{currentPage:e.currentPage,users:e.users}}))((function(e){var t=e.currentPage,n=e.users;return Object(N.jsx)(m.a,{children:Object(N.jsxs)(y.a,{children:[Object(N.jsx)(A,{}),Object(N.jsxs)(S.a,{className:"d-flex justify-content-center",children:[t===n.user&&Object(N.jsx)(M,{}),"trade"===t&&Object(N.jsx)(K,{user:n.user,usersCrypto:n.data})]}),Object(N.jsx)(P,{})]})})}));document.addEventListener("DOMContentLoaded",(function(){Object(a.render)(Object(N.jsx)(c.a.StrictMode,{children:Object(N.jsx)(s.a,{store:g,children:Object(N.jsx)(X,{})})}),document.getElementById("root"))}))}},[[87,1,2]]]);
//# sourceMappingURL=main.8cc7eca9.chunk.js.map